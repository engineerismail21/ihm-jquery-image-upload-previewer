<<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>

    <link rel="stylesheet" type="text/css" href="css/ihm_img_upload_previewer.css" />
    <script type="text/javascript" src="js/ihm_img_upload_previewer.js"></script>
</head>
<body>

</body>
</html>
        <form id="formProductUpdate" class="form form-horizontal" method="post" action="{{ route('product.update', $product->product_id) }}" enctype="multipart/form-data">
            @method('PUT')
    @else
        <form id="formProductUpdate" class="form form-horizontal" method="post" action="{{ route('product.store') }}" enctype="multipart/form-data">
    @endif

        {{ csrf_field() }}

        @php
            $brands  = getBrands();
        @endphp

        @if($errors->any())
        <div class="alert alert-danger">
            <ul>
                @foreach($errors->all() as $error)
                    <li>{{ $error }}</li>
                @endforeach
            </ul>
        </div>
        @endif

        <section id="horizontal-form-layouts">
            <div class="row">
                <div class="col-sm-8">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">General Info.</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="title">Title EN</label>
                                        <div class="col-md-9">
                                            <input type="text" id="title" class="form-control" name="title" value="{{ old('title', (isset($product) ? $product->title : '')) }}">

                                            @error('title')
                                                <label id="title-error" class="danger" for="title">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="title_bn">Title BN</label>
                                        <div class="col-md-9">
                                            <input type="text" id="title_bn" class="form-control" name="title_bn" value="{{ old('title_bn', (isset($product) ? $product->title_bn : '')) }}">

                                            @error('title_bn')
                                                <label id="title_bn-error" class="danger" for="title_bn">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="slug">Slug</label>
                                        <div class="col-md-9">
                                            <input type="text" id="slug" class="form-control title-slug" name="slug" value="{{ old('slug', (isset($product) ? $product->slug : '')) }}">

                                            @error('slug')
                                                <label id="title-error" class="danger" for="slug">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="short_description">Short Description EN</label>
                                        <div class="col-md-9">
                                            <textarea id="short_description" class="form-control" name="short_description" rows="3">{{ old('short_description', (isset($product) ? $product->short_description : '')) }}</textarea>

                                            @error('short_description')
                                                <label id="title-error" class="danger" for="short_description">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="short_description_bn">Short Description BN</label>
                                        <div class="col-md-9">
                                            <textarea id="short_description_bn" class="form-control" name="short_description_bn" rows="3">{{ old('short_description_bn', (isset($product) ? $product->short_description_bn : '')) }}</textarea>

                                            @error('short_description_bn')
                                                <label id="title-error" class="danger" for="short_description_bn">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="description">Description EN</label>
                                        <div class="col-md-9">
                                            <textarea id="description" class="tinymceTextarea form-control" name="description" rows="10">{{ old('description', (isset($product) ? $product->description : '')) }}</textarea>

                                            @error('description')
                                                <label id="title-error" class="danger" for="description">
                                                    {{ $description }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="description_bn">Description BN</label>
                                        <div class="col-md-9">
                                            <textarea id="description_bn" class="tinymceTextarea form-control" name="description_bn" rows="10">{{ old('description_bn', (isset($product) ? $product->description_bn : '')) }}</textarea>

                                            @error('description_bn')
                                                <label id="title-error" class="danger" for="description_bn">
                                                    {{ $description }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="size_guide">Size Guide EN</label>
                                        <div class="col-md-9">
                                            <textarea id="size_guide" class="tinymceTextarea form-control" name="size_guide" rows="10">{{ old('size_guide', isset($prodSizeGuide) && !empty($prodSizeGuide) ? $prodSizeGuide->size_info : '') }}</textarea>

                                            @error('size_guide')
                                                <label id="title-error" class="danger" for="size_guide">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="size_guide_bn">Size Guide BN</label>
                                        <div class="col-md-9">
                                            <textarea id="size_guide_bn" class="tinymceTextarea form-control" name="size_guide_bn" rows="10">{{ old('size_guide_bn', isset($prodSizeGuide) && !empty($prodSizeGuide) ? $prodSizeGuide->size_info_bn : '') }}</textarea>

                                            @error('size_guide_bn')
                                                <label id="title-error" class="danger" for="size_guide_bn">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="type">Type</label>
                                        <div class="col-md-9">
                                            <select id="type" name="type" class="form-control">
                                                <option value="simple" {{ old('type', (isset($product) ? $product->type : '')) == 'simple' ? 'selected' : '' }}>Simple</option>
                                                <option value="variation" {{ old('type', (isset($product) ? $product->type : '')) == 'variation' ? 'selected' : '' }}>Variation</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" id="simpleProductPricingBox">
                        <div class="card-header">
                            <h4 class="card-title">Product Pricing</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="sku">SKU</label>
                                        <div class="col-md-9">
                                            <input type="text" id="sku" class="form-control" name="sku" value="{{ old('sku', (isset($product) ? $product->sku : '')) }}">

                                            @error('sku')
                                                <label id="title-error" class="danger" for="sku">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="buying_price">Buying Price</label>
                                        <div class="col-md-9">
                                            <input type="text" id="buying_price" class="form-control" name="buying_price" value="{{ old('buying_price', (isset($product) ? $product->buying_price : '')) }}">

                                            @error('buying_price')
                                                <label id="title-error" class="danger" for="buying_price">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="regular_price">Regular Price</label>
                                        <div class="col-md-9">
                                            <input type="text" id="regular_price" class="form-control" name="regular_price" value="{{ old('regular_price', (isset($product) ? $product->regular_price : '')) }}">

                                            @error('regular_price')
                                                <label id="title-error" class="danger" for="regular_price">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="sale_price">Sale Price</label>
                                        <div class="col-md-9">
                                            <input type="text" id="sale_price" class="form-control" name="sale_price" value="{{ old('sale_price', (isset($product) ? $product->sale_price : '')) }}">

                                            @error('sale_price')
                                                <label id="title-error" class="danger" for="sale_price">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="discount_from">Discount From</label>
                                        <div class="col-md-9">
                                            <input type="date" id="discount_from" class="form-control" name="discount_from" value="{{ old('discount_from', (isset($product) ? $product->discount_from : '')) }}">

                                            @error('discount_from')
                                                <label id="title-error" class="danger" for="discount_from">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="discount_to">Discount To</label>
                                        <div class="col-md-9">
                                            <input type="date" id="discount_to" class="form-control" name="discount_to" value="{{ old('discount_to', (isset($product) ? $product->discount_to : '')) }}">

                                            @error('discount_to')
                                                <label id="title-error" class="danger" for="discount_to">
                                                    {{ $message }}
                                                </label>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card d-none">
                        <div class="card-header">
                            <h4 class="card-title">Specifications</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="repeater-default">
                                        <div data-repeater-list="specifications">
                                            @if(isset($specifications) && !empty($specifications))
                                                @foreach($specifications as $key => $value)
                                                    <div data-repeater-item>
                                                        <div class="row row5">
                                                            <div class="form-group col-sm-5">
                                                                <input type="text" name="specifications[key][]" class="form-control" value="{{ $key }}" placeholder="Specification Key" />
                                                            </div>
                                                            <div class="form-group col-sm-6">
                                                                <input type="text" name="specifications[value][]" class="form-control" value="{{ $value }}" placeholder="Specification Value" />
                                                            </div>
                                                            <div class="form-group col-sm-1">
                                                                <button type="button" class="btn btn-danger" data-repeater-delete>
                                                                    <i class="ft-x"></i>
                                                                </button>
                                                            </div>
                                                            <hr />
                                                        </div>
                                                    </div>
                                                @endforeach
                                            @else
                                                <div data-repeater-item>
                                                    <div class="row row5">
                                                        <div class="form-group col-sm-5">
                                                            <input type="text" name="specifications[key][]" class="form-control" placeholder="Specification Key" />
                                                        </div>
                                                        <div class="form-group col-sm-6">
                                                            <input type="text" name="specifications[value][]" class="form-control" placeholder="Specification Value" />
                                                        </div>
                                                        <div class="form-group col-sm-1">
                                                            <button type="button" class="btn btn-danger" data-repeater-delete>
                                                                <i class="ft-x"></i>
                                                            </button>
                                                        </div>
                                                        <hr />
                                                    </div>
                                                </div>
                                            @endif
                                        </div>
                                        <div class="overflow-hidden">
                                            <button type="button" data-repeater-create class="btn btn-primary">
                                                <i class="ft-plus"></i> Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" id="variationProductBox" style="{{ old('type', (isset($product) ? $product->type : '')) == 'variation' ? 'display:block;' : 'display:none;' }}">
                        <div class="card-header">
                            <h4 class="card-title">Variations</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body variations-panel">
                                <button type="button" class="btn btn-primary btn-sm mb-2" onclick="openCombinationBox()">
                                    @if(isset($product))
                                        Re-Generate Variant Combination
                                    @else
                                        Generate Variant Combination
                                    @endif
                                </button>

                                <div id="variantHtmlBox" class="variants" style="display:none;">
                                    @if($variants)
                                        @foreach($variants as $variant)
                                            <div class="form-group mb-0">
                                                @if($variant_items && isset($variant_items[$variant->variant_id]) && $variant_items[$variant->variant_id])
                                                    <label class="parent-variants">
                                                        <input type="checkbox" name="variants[]" value="{{ $variant->variant_id }}" {{ !empty(old('variants')) && in_array($variant->variant_id, old('variants')) ? 'checked' : '' }}>
                                                        {{ $variant->variant_name }}
                                                    </label>

                                                    <ul class="variant-items mb-0">
                                                        @foreach($variant_items[$variant->variant_id] as $v_item)
                                                            <li class="variant-item">
                                                                <label>
                                                                    <input type="checkbox" name="variant_items[{{ $v_item->variant_id }}][]" value="{{ $v_item->item_name }}" {{ !empty(old('variant_items')) && isset(old('variant_items')[$variant->variant_id]) && in_array($v_item->item_name, old('variant_items')[$variant->variant_id]) ? 'checked' : '' }} {{ !empty(old('variants')) && in_array($variant->variant_id, old('variants')) ? '' : 'disabled' }}>
                                                                    {{ $v_item->item_name }}
                                                                </label>
                                                            </li>
                                                        @endforeach
                                                    </ul>
                                                @endif
                                            </div>
                                        @endforeach

                                        <button type="button" class="btn btn-primary btn-sm pull-right" onclick="generateCombination()">
                                            Click to generate combination
                                        </button>
                                    @endif
                                </div>

                                <div id="variantCombinationHtml">
                                    {!! $combination_html !!}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <a class="btn btn-warning mr-1" href="{{ route('product.index') }}">
                            <i class="ft-x"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fa fa-check-square-o"></i> Update
                        </button>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Additional Info.</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="form-group">
                                        <label class="label-control" for="ordering">Ordering</label>
                                        <input type="text" id="ordering" class="form-control" name="ordering" value="{{ old('ordering', (isset($product) ? $product->ordering : '')) }}">

                                        @error('ordering')
                                            <label id="title-error" class="danger" for="ordering">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>

                                    <div class="form-group">
                                        <label class="label-control" for="status">Status</label>
                                        <select id="status" name="status" class="form-control">
                                            <option value="1" {{ old('status', (isset($product) ? $product->status : 1)) == 1 ? 'selected' : '' }}>Active</option>
                                            <option value="0" {{ old('status', (isset($product) ? $product->status : 1)) == 0 ? 'selected' : '' }}>Inactive</option>
                                        </select>

                                        @error('status')
                                            <label id="title-error" class="danger" for="status">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>

                                    <div class="d-none form-group">
                                        <label class="label-control" for="admin_status">Admin Status</label>
                                        <select id="admin_status" name="admin_status" class="form-control">
                                            <option value="1" {{ old('admin_status', (isset($product) ? $product->admin_status : '')) == 1 ? 'selected' : '' }}>Active</option>
                                            <option value="0" {{ old('admin_status', (isset($product) ? $product->admin_status : '')) == 0 ? 'selected' : '' }}>Inactive</option>
                                        </select>

                                        @error('admin_status')
                                            <label id="title-error" class="danger" for="admin_status">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>

                                    <div class="form-group">
                                        <label class="label-control" for="is_featured">Is Featured?</label>
                                        <select id="is_featured" name="is_featured" class="form-control">
                                            <option value="yes" {{ old('is_featured', (isset($product) ? $product->is_featured : '')) == 'yes' ? 'selected' : '' }}>Yes</option>
                                            <option value="no" {{ old('is_featured', (isset($product) ? $product->is_featured : '')) == 'no' ? 'selected' : '' }}>No</option>
                                        </select>

                                        @error('is_featured')
                                            <label id="title-error" class="danger" for="is_featured">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>
                                    <div class="form-group">
                                        <label class="label-control" for="shipping_cost">Shipping Cost</label>
                                        <input type="text" id="shipping_cost" class="form-control" name="shipping_cost" value="{{ old('shipping_cost', (isset($product) ? $product->shipping_cost : '')) }}">

                                        @error('shipping_cost')
                                            <label id="title-error" class="danger" for="shipping_cost">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Category Relations</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="form-group" id="categories">
                                        {{ getCategoryTreeCheckbox('categories[]', old('categories', (isset($categories) && !empty($categories) ? $categories : []))) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Product Tags</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="form-group">
                                        <select class="select2-tags w-100" name="product_tags[]" multiple placeholder="Choose Tags">
                                            @if($tags)
                                                @foreach($tags as $tag)
                                                    <option value="{{ $tag->tag_id }}" {{ in_array($tag->tag_id, old('product_tags', (isset($productTags) && !empty($productTags) ? $productTags : []))) ? 'selected' : '' }}>{{ $tag->tag_name }}</option>
                                                @endforeach
                                            @endif
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" id="simpleProductStockBox">
                        <div class="card-header">
                            <h4 class="card-title">Stock Settings</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <?php
                                    $selectedManageStock = old('manage_stock', (isset($product) ? $product->manage_stock : ''));
                                    ?>

                                    <div class="form-group">
                                        <label class="parent-variants">
                                            <input type="checkbox" name="manage_stock" id="manage_stock" value="1" {{ $selectedManageStock == 1 ? 'checked' : '' }} />
                                            Manage Stock
                                        </label>

                                        @error('manage_stock')
                                            <label id="title-error" class="danger" for="manage_stock">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>

                                    <div class="form-group stockStaus" style="display:{{ $selectedManageStock == 1 ? 'none' : 'block' }}">
                                        <label class="label-control" for="stock_status">Stock Status</label>
                                        <select id="stock_status" name="stock_status" class="form-control">
                                            <option value="instock" {{ old('stock_status', (isset($product) ? $product->stock_status : '')) == 'instock' ? 'selected' : '' }}>In stock</option>
                                            <option value="outofstock" {{ old('stock_status', (isset($product) ? $product->stock_status : '')) == 'outofstock' ? 'selected' : '' }}>Out of stock</option>
                                        </select>

                                        @error('stock_status')
                                            <label id="title-error" class="danger" for="stock_status">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>

                                    <div class="form-group stockQuantity" style="display:{{ $selectedManageStock == 1 ? 'block' : 'none' }}">
                                        <label class="label-control" for="stock_quantity">Stock Quantity</label>
                                        <input type="text" id="stock_quantity" class="form-control" name="stock_quantity" value="{{ old('stock_quantity', (isset($product) ? $product->stock_quantity : '')) }}">

                                        @error('stock_quantity')
                                            <label id="title-error" class="danger" for="stock_quantity">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>

                                    <div class="form-group stockQuantity" style="display:{{ $selectedManageStock == 1 ? 'block' : 'none' }}">
                                        <label class="label-control" for="low_stock_quantity">Low Stock Quantity</label>
                                        <input type="text" id="low_stock_quantity" class="form-control" name="low_stock_quantity" value="{{ old('low_stock_quantity', (isset($product) ? $product->low_stock_quantity : '')) }}">

                                        @error('low_stock_quantity')
                                            <label id="title-error" class="danger" for="low_stock_quantity">
                                                {{ $message }}
                                            </label>
                                        @enderror
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Front Image</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="mItImgUplPreviewer product-featured-image" data-uploaded-type="single" data-file-name="featured_image">
                                        <div class="preview-loader">
                                            <img src="{{ getMediaUrl((isset($product) ? $product->product_id : ''), 'featured_image', '300x300') }}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Back Image</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="mItImgUplPreviewer product-featured-image" data-uploaded-type="single" data-file-name="back_image">
                                        <div class="preview-loader">
                                            <img src="{{ getMediaUrl((isset($product) ? $product->product_id : ''), 'back_image') }}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Gallery Images</h4>
                            <a class="heading-elements-toggle">
                                <i class="fa fa-ellipsis-v font-medium-3"></i>
                            </a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li>
                                        <a data-action="collapse">
                                            <i class="ft-minus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <hr class="mt-0 mb-0"/>

                        <div class="card-content collpase collapse show">
                            <div class="card-body">
                                <div class="form-body">
                                    <div class="mb-0 dropzone-group">
                                        <div action="#" class="dropzone" id="myAwesomeDropzone"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </form>
@endsection

@section('script')
    <script type="text/javascript">
        $(document).ready(function()
        {
            // set parent category on change child
            $('body').on('change', '#categories input', function(){
                let thisCat = $(this);
                let parentId = thisCat.parents('label').attr('data-parent-id');
                // $('#category-id-'+parentId).trigger('click');

                if ($('#category-id-' + parentId).is(':checked')) {
                } else {
                    $('#category-id-'+parentId).trigger('click');
                }
            });

            // title to slug on change title
            $("#title").bind("change paste", function()
            {
                var text = convertTextToSlug($(this).val());
                var slug = $(".title-slug").val();

                if(slug == ''){
                    $(".title-slug").val(text);
                }
            });

            // change all price according to general pricing
            $("#sku").bind("change keyup paste", function () {
                $(".sku").val($(this).val());
            });
            $("#buying_price").bind("change keyup paste", function () {
                $(".buyingPrice").val($(this).val());
            });
            $("#regular_price").bind("change keyup paste", function () {
                $(".regularPrice").val($(this).val());
            });
            $("#sale_price").bind("change keyup paste", function () {
                $(".salePrice").val($(this).val());
            });
            $("#discount_from").bind("change keyup paste", function () {
                $(".discountFrom").val($(this).val());
            });
            $("#discount_to").bind("change keyup paste", function () {
                $(".discountTo").val($(this).val());
            });

            $("#manage_stock").on("change", function()
            {
                let manage_stock = $('#manage_stock:checked').val();
                if(manage_stock == 1)
                {
                    $('.stockStaus').hide();
                    $('.stockQuantity').show();
                }
                else
                {
                    $('.stockStaus').show();
                    $('.stockQuantity').hide();
                }
            });

            $("body").on("change", '.variationManageStock', function()
            {
                let variationParent = $(this).parents('.variation-item');

                let manage_stock = variationParent.find('.variationManageStock:checked').val();
                if(manage_stock == 1)
                {
                    variationParent.find('.variationStockStatus').hide();
                    variationParent.find('.variationStockQuantity').show();
                }
                else
                {
                    variationParent.find('.variationStockStatus').show();
                    variationParent.find('.variationStockQuantity').hide();
                }
            });

            jQuery('#type').on('change', function()
            {
                var product_type = jQuery('#type').val();
                manageProductType(product_type);
            });

            jQuery('body').on('change', '.parent-variants input[type=checkbox]', function()
            {
                let varient_items = jQuery(this).parents('.form-group').find('.variant-items input[type=checkbox]');

                if(jQuery(this).is(':checked')){
                    varient_items.removeAttr('disabled');
                }
                else{
                    varient_items.attr('disabled', 'disabled');
                    varient_items.prop('checked', false);
                }
            });

            jQuery('body').on('click', '.variant-item label, .variant-item input', function()
            {
                let parent_varient = jQuery(this).parents('.form-group').find('.parent-variants input[type=checkbox]');
                if(!parent_varient.is(':checked')){
                    alert('Please select parent variant at first!');
                }
            });
        });

        manageProductType('{{ old('type', (isset($product) ? $product->type : 'simple')) }}');
        function manageProductType(product_type = 'simple')
        {
            if(product_type == 'simple'){
                jQuery('#simpleProductStockBox').show();
                jQuery('#variationProductBox').hide();
            }
            else{
                jQuery('#simpleProductStockBox').hide();
                jQuery('#variationProductBox').show();
            }
        }

        function generateCombination()
        {
            var formData = $('#formProductUpdate').serialize();
            formData += "&_method=" + encodeURIComponent('POST');

            $.ajax({
                method: 'POST',
                url: '{{ url('generate-variant-combination') }}',
                data: formData,
                success: function(data)
                {
                    $('#variantCombinationHtml').html(data);

                    // change all price according to general pricing
                    setTimeout(function (){
                        $(".sku").val($("#sku").val());
                        $(".buyingPrice").val($("#buying_price").val());
                        $(".regularPrice").val($("#regular_price").val());
                        $(".salePrice").val($("#sale_price").val());
                        $(".discountFrom").val($("#discount_from").val());
                        $(".discountTo").val($("#discount_to").val());
                    }, 1000);
                }
            });
        }

        function openCombinationBox()
        {
            $('#variantHtmlBox').toggle();
        }

        function cloneProductPricingToVariations()
        {
            // change all price according to general pricing
            $("#sku").bind("change keyup paste", function () {
                $(".sku").val($(this).val());
            });
            $("#buying_price").bind("change keyup paste", function () {
                $(".buyingPrice").val($(this).val());
            });
            $("#regular_price").bind("change keyup paste", function () {
                $(".regularPrice").val($(this).val());
            });
            $("#sale_price").bind("change keyup paste", function () {
                $(".salePrice").val($(this).val());
            });
            $("#discount_from").bind("change keyup paste", function () {
                $(".discountFrom").val($(this).val());
            });
            $("#discount_to").bind("change keyup paste", function () {
                $(".discountTo").val($(this).val());
            });
        }

        // Dropzone Configure
        Dropzone.options.myAwesomeDropzone = {
            addRemoveLinks: true,
            init: function() {
                thisDropzone = this;
                $.get("{{ url('product/ajaxAllMediaList/'.(isset($product) ? $product->product_id : '')) }}",
                    function(data) {
                        $.each(data, function(key, value) {
                            var mockFile = {
                                xhr: {
                                    response: value.media_id,
                                },
                                name: value.name,
                                size: value.size
                            };

                            thisDropzone.options.addedfile.call(thisDropzone, mockFile);
                            thisDropzone.options.thumbnail.call(thisDropzone, mockFile, value.url);
                        });
                    });
            },
            processing: function(file) {
                this.options.url = "{{ url('product/ajaxAddMediaFile') }}";
            },
            success: function(file, response) {
                jQuery('#formProductUpdate').append('<input type="hidden" name="media_temp_ids[]" id="media_temp_id_' + response + '" class="media_temp_ids" value="' + response + '">');

                setTimeout(function() {
                    ajaxProductUpdate("{{ url('product/ajaxUpdateMediaFile/'.(isset($product) ? $product->product_id : '')) }}", "media");
                }, 1000);
            },
            removedfile: function(file) {
                var media_id = file.xhr.response;

                $.ajax({
                    type: 'GET',
                    dataType: 'html',
                    url: "{{ url('product/ajaxDeleteMediaFile') }}",
                    data: {
                        'media_id': media_id
                    },
                    success: function(data) {
                        if ($('#myAwesomeDropzone .dz-image-preview').length > 0) {
                            $('#myAwesomeDropzone').addClass('dz-started');
                        }

                        jQuery('#formProductUpdate #media_temp_id_' + media_id).remove();
                    }
                });

                var _ref;
                return (_ref = file.previewElement) != null ? _ref.parentNode.removeChild(file.previewElement) : void 0;
            }
        };

        //delete gallery img data
        $(document).on({
            click: function (e) {
                e.preventDefault();
                const delete_table_name = $(this).attr('data-delete_table');
                const delete_table_column = $(this).attr('data-delete_column');
                const delete_id = $(this).attr('data-delete_id');
                AJAX_DELETE_REQUEST('POST', '/delete', {
                    delete_table_name:delete_table_name,
                    delete_table_column:delete_table_column,
                    delete_id:delete_id
                }, undefined, $(this).parents('.gallery-image'),$(this));
            }
        }, '.delete_gallery_img');
    </script>
@endsection
